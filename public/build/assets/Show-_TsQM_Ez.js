import{j as e,t as f,e as j,S as b}from"./app-5G6iJb5i.js";import{G as g}from"./GetFineStatusBadge-CMSFHfUo.js";import{H as k}from"./HeaderTitle-Cc51rAMj.js";import{I as _}from"./IconCircleCheck-tgyNR5wi.js";import{m as N,A as y}from"./AppLayout-DUuU36uc.js";import{A as v,b as T,a as w}from"./alert-Crfb57er.js";import{B as i}from"./button-CIL1ReQ8.js";import{C as c,c as C,a as m,b as P}from"./card-Bqk0IEKP.js";import{T as S,a as A,b as x,c as t,d as B,e as n}from"./table-B41BsM3F.js";import{b as r,F as D}from"./index-B9GTUlAE.js";import{t as s}from"./index-DdeEEz-B.js";import"./badge-D0IxnB5C.js";import"./ApplicationLogo-BUFsgaJq.js";import"./check-CWrr7DDb.js";import"./index-CBkI1MNZ.js";function K(a){const{SUCCESS:l}=D,u=async()=>{try{const h=(await j.post(route("payments.create"),{order_id:a.return_book.return_book_code})).data.snapToken;window.snap.pay(h,{onSuccess:d=>{s.success("Pembayaran sukses"),b.get(route("payments.success"))},onPending:d=>{s.warning("Pembayaran tertunda")},onError:d=>{s.error("Kesalahan pembayaran")},onClose:d=>{s.info("Pembayaran ditutup")}})}catch(o){s.error(`Kesalahan pembayaran ${o}`)}};return e.jsxs("div",{className:"flex w-full flex-col space-y-4 pb-32",children:[e.jsx("div",{className:"flex flex-col items-start justify-between gap-y-4 lg:flex-row lg:items-center",children:e.jsx(k,{title:a.page_settings.title,subtitle:a.page_settings.subtitle,icon:N})}),e.jsxs(c,{children:[e.jsxs(C,{className:"flex flex-col gap-6 border-b border-muted text-sm lg:flex-row lg:items-center lg:justify-between lg:px-6",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Kode Peminjaman"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.loan.loan_code})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Peminjam"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.user.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Tanggal Peminjaman"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.loan.loan_date})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Kode Pengembalian"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.return_book_code})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Kode Pengembalian"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.status})]})]}),e.jsx(m,{className:"divide-y divide-gray-200 py-6",children:e.jsxs("div",{className:"flex items-center lg:items-start",children:[e.jsx("div",{className:"h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg bg-gray-200 lg:h-40 lg:w-40",children:e.jsx("img",{src:a.return_book.book.cover,alt:a.return_book.book.title,className:"h-full w-full object-cover object-center"})}),e.jsxs("div",{className:"ml-6 flex-1 text-sm",children:[e.jsx("h5",{className:"text-lg font-bold leading-relaxed",children:a.return_book.book.title}),e.jsx("p",{className:"hidden text-muted-foreground lg:mt-2 lg:block",children:a.return_book.book.synopsis})]})]})}),e.jsxs(P,{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"size-5 text-green-500"}),e.jsxs("p",{className:"ml-2 text-sm font-medium text-muted-foreground",children:["Dikembalikan pada tanggal"," ",e.jsx("time",{dateTime:a.return_book.return_date,children:a.return_book.return_date})]})]}),e.jsx("div",{className:"flex pt-6 text-sm font-medium lg:items-center lg:border-none lg:pt-0",children:e.jsx("div",{className:"flex flex-1 justify-center",children:e.jsx(i,{variant:"link",children:e.jsx(f,{href:route("front.books.show",[a.return_book.book.slug]),children:"Lihat Buku"})})})})]})]}),a.return_book.fine&&e.jsx("h2",{className:"font-semibold leading-relaxed text-foreground",children:"Informasi Denda"}),a.return_book.fine&&a.return_book.fine.payment_status!==l&&e.jsxs(v,{variant:"destructive",children:[e.jsx(T,{children:"Informasi"}),e.jsx(w,{children:"Setelah melalui pengecekan, peminjaman buku Anda terkena denda. Harap untuk melunasi pembayaran denda terlebih dahulu"})]}),a.return_book.fine&&e.jsx(c,{children:e.jsx(m,{className:"space-y-20 p-6",children:e.jsxs("div",{children:[e.jsx("div",{className:"rounded-lg px-4 py-6",children:e.jsxs("dl",{className:"flex flex-col gap-x-12 gap-y-4 text-sm leading-relaxed text-foreground lg:flex-row",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold",children:"Kode Peminjaman"}),e.jsx("dd",{children:a.return_book.loan.loan_code})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold",children:"Tanggal Peminjaman"}),e.jsx("dd",{children:e.jsx("time",{dateTime:a.return_book.loan.loan_date,children:a.return_book.loan.loan_date})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold",children:"Batas Pengembalian"}),e.jsx("dd",{children:e.jsx("time",{dateTime:a.return_book.loan.due_date,children:a.return_book.loan.due_date})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold",children:"Total Denda"}),e.jsx("dd",{className:"text-red-500",children:r(a.return_book.fine.total_fee)})]})]})}),e.jsxs(S,{className:"mt-6 w-full",children:[e.jsx(A,{children:e.jsxs(x,{children:[e.jsx(t,{children:"Pengguna"}),e.jsx(t,{children:"Buku"}),e.jsx(t,{children:"Denda Keterlambatan"}),e.jsx(t,{children:"Denda Lain-Lain"}),e.jsx(t,{children:"Total Denda"}),e.jsx(t,{children:"Status Pembayaran"}),a.return_book.fine.payment_status!==l&&e.jsx(t,{children:"Aksi"})]})}),e.jsx(B,{children:e.jsxs(x,{children:[e.jsx(n,{children:a.return_book.user.name}),e.jsx(n,{children:a.return_book.book.title}),e.jsxs(n,{children:[r(a.return_book.fine.late_fee)," ",e.jsxs("span",{className:"text-red-500",children:["(",a.return_book.dayslate," hari)"]})]}),e.jsxs(n,{children:[r(a.return_book.fine.other_fee)," ",e.jsxs("span",{className:"text-red-500",children:["(",a.return_book.return_book_check.condition,")"]})]}),e.jsx(n,{children:r(a.return_book.fine.total_fee)}),e.jsx(n,{children:e.jsx(g,{status:a.return_book.fine.payment_status})}),a.return_book.fine.payment_status!==l&&e.jsx(n,{children:e.jsx(i,{variant:"outline",onClick:u,children:"Bayar"})})]})})]}),e.jsxs("p",{className:"mt-12 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Catatan: "}),a.return_book.return_book_check.notes]})]})})})]})}K.layout=a=>e.jsx(y,{title:a.props.page_settings.title,children:a});export{K as default};
